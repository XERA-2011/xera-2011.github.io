<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>SVG å¯¼å‡º PNGï¼ˆé»‘/ç™½åŒç‰ˆæœ¬ï¼‰</title>
  <style>
    body {
      background: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      color: white;
      font-family: sans-serif;
    }
    svg {
      border: 1px solid #555;
      margin-bottom: 20px;
    }
    .btns {
      display: flex;
      gap: 12px;
    }
    button {
      background: #00bcd4;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #0097a7;
    }
  </style>
</head>
<body>

  <!-- SVG åŠ¨ç”» -->
  <svg id="mySvg" viewBox="0 0 100 100" width="150" height="150" xmlns="http://www.w3.org/2000/svg">
    <rect width="100" height="100" fill="black" />
    <line x1="25" y1="25" x2="75" y2="75" stroke="white" stroke-width="12"
          stroke-dasharray="71" stroke-dashoffset="71">
      <animate attributeName="stroke-dashoffset" from="71" to="0" dur="0.5s" fill="freeze" />
    </line>
    <line x1="25" y1="75" x2="75" y2="25" stroke="white" stroke-width="12"
          stroke-dasharray="71" stroke-dashoffset="71">
      <animate attributeName="stroke-dashoffset" from="71" to="0" dur="0.5s" begin="0.5s" fill="freeze" />
    </line>
  </svg>

  <div class="btns">
    <button id="btnBlack">ğŸ–¤ é»‘è‰² Logo + é€æ˜åº•</button>
    <button id="btnWhite">âšª ç™½è‰² Logo + é»‘åº•</button>
  </div>

  <script>
    const svg = document.getElementById('mySvg');

    function exportPNG({ color = 'white', background = 'black', filename = 'logo.png' }) {
      setTimeout(() => {
        // å…‹éš†å¹¶å»æ‰åŠ¨ç”»
        const clone = svg.cloneNode(true);
        clone.querySelectorAll('animate').forEach(a => a.remove());
        clone.querySelectorAll('line').forEach(line => {
          line.setAttribute('stroke-dashoffset', '0');
          line.setAttribute('stroke', color);
        });

        // èƒŒæ™¯å¤„ç†
        const rect = clone.querySelector('rect');
        if (background) {
          if (!rect) {
            const bg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            bg.setAttribute('width', '100');
            bg.setAttribute('height', '100');
            bg.setAttribute('fill', background);
            clone.insertBefore(bg, clone.firstChild);
          } else {
            rect.setAttribute('fill', background);
          }
        } else if (rect) {
          rect.remove(); // å»æ‰èƒŒæ™¯
        }

        // åºåˆ—åŒ–å¹¶å¯¼å‡º
        const serializer = new XMLSerializer();
        const svgStr = serializer.serializeToString(clone);
        const blob = new Blob([svgStr], { type: 'image/svg+xml;charset=utf-8' });
        const url = URL.createObjectURL(blob);

        const img = new Image();
        img.onload = () => {
          const size = 1024;
          const canvas = document.createElement('canvas');
          canvas.width = size;
          canvas.height = size;
          const ctx = canvas.getContext('2d');
          ctx.clearRect(0, 0, size, size);
          ctx.drawImage(img, 0, 0, size, size);
          URL.revokeObjectURL(url);

          const png = canvas.toDataURL('image/png');
          const a = document.createElement('a');
          a.href = png;
          a.download = filename;
          a.click();
        };
        img.src = url;
      }, 1100); // ç­‰åŠ¨ç”»ç»“æŸ
    }

    document.getElementById('btnBlack').addEventListener('click', () => {
      exportPNG({
        color: 'black',
        background: null, // é€æ˜èƒŒæ™¯
        filename: 'cross-black-transparent.png'
      });
    });

    document.getElementById('btnWhite').addEventListener('click', () => {
      exportPNG({
        color: 'white',
        background: 'black',
        filename: 'cross-white-black.png'
      });
    });
  </script>

</body>
</html>

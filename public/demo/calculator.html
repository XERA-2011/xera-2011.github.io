<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>Apple Skeuomorphic Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
  body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(circle at top, #555, #111);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial;
  }

  .calculator {
    width: 340px;
    padding: 14px;
    border-radius: 26px;
    background: linear-gradient(#3a3a3a, #1f1f1f);
    box-shadow:
      inset 0 2px 2px rgba(255,255,255,0.2),
      inset 0 -4px 6px rgba(0,0,0,0.8),
      0 30px 60px rgba(0,0,0,0.7);
  }

  /* 顶部栏 */
  .top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    color: #ccc;
    font-size: 13px;
  }

  /* 拟物切换开关 */
  .toggle {
    width: 70px;
    height: 28px;
    border-radius: 14px;
    background: linear-gradient(#222, #000);
    box-shadow: inset 0 2px 4px rgba(0,0,0,.8);
    position: relative;
    cursor: pointer;
  }

  .toggle::after {
    content: "";
    position: absolute;
    width: 30px;
    height: 22px;
    left: 4px;
    top: 3px;
    border-radius: 11px;
    background: linear-gradient(#aaa, #777);
    box-shadow:
      inset 0 1px 1px rgba(255,255,255,.5),
      0 2px 4px rgba(0,0,0,.6);
    transition: 0.2s ease;
  }

  .toggle.scientific::after {
    left: 36px;
    background: linear-gradient(#ffb347, #ff8c00);
  }

  /* 显示屏 */
  .display {
    height: 64px;
    margin-bottom: 14px;
    border-radius: 12px;
    background: linear-gradient(#111, #000);
    box-shadow:
      inset 0 3px 6px rgba(0,0,0,0.9),
      inset 0 -1px 1px rgba(255,255,255,0.1);
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 0 16px;
    color: #eaeaea;
    font-size: 34px;
  }

  .keys {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
  }

  .scientific-keys {
    display: none;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    margin-bottom: 10px;
  }

  .calculator.scientific .scientific-keys {
    display: grid;
  }

  button {
    height: 56px;
    border-radius: 12px;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: #fff;
    background: linear-gradient(#6a6a6a, #3d3d3d);
    box-shadow:
      inset 0 1px 1px rgba(255,255,255,0.35),
      inset 0 -3px 4px rgba(0,0,0,0.7),
      0 3px 5px rgba(0,0,0,0.6);
  }

  button:active {
    transform: translateY(2px);
  }

  .fn {
    background: linear-gradient(#9b9b9b, #6f6f6f);
    color: #111;
  }

  .op {
    background: linear-gradient(#ffb347, #ff8c00);
    color: #111;
    font-weight: bold;
  }

  .equal {
    background: linear-gradient(#ff9500, #e67e00);
  }

  .zero {
    grid-column: span 2;
  }
</style>
</head>
<body>

<div class="calculator" id="calc">
  <div class="top-bar">
    <span id="modeText">普通</span>
    <div class="toggle" id="toggle"></div>
  </div>

  <div class="display" id="display">0</div>

  <!-- 科学计算器 -->
  <div class="scientific-keys">
    <button class="fn" onclick="append('Math.sin(')">sin</button>
    <button class="fn" onclick="append('Math.cos(')">cos</button>
    <button class="fn" onclick="append('Math.tan(')">tan</button>
    <button class="fn" onclick="append('Math.PI')">π</button>

    <button class="fn" onclick="append('Math.log(')">ln</button>
    <button class="fn" onclick="append('Math.log10(')">log</button>
    <button class="fn" onclick="append('Math.sqrt(')">√</button>
    <button class="fn" onclick="append('Math.E')">e</button>
  </div>

  <!-- 普通计算器 -->
  <div class="keys">
    <button class="fn" onclick="clearAll()">AC</button>
    <button class="fn" onclick="toggleSign()">±</button>
    <button class="fn" onclick="percent()">%</button>
    <button class="op" onclick="append('/')">÷</button>

    <button onclick="append('7')">7</button>
    <button onclick="append('8')">8</button>
    <button onclick="append('9')">9</button>
    <button class="op" onclick="append('*')">×</button>

    <button onclick="append('4')">4</button>
    <button onclick="append('5')">5</button>
    <button onclick="append('6')">6</button>
    <button class="op" onclick="append('-')">−</button>

    <button onclick="append('1')">1</button>
    <button onclick="append('2')">2</button>
    <button onclick="append('3')">3</button>
    <button class="op equal" onclick="calculate()">=</button>

    <button class="zero" onclick="append('0')">0</button>
    <button onclick="append('.')">.</button>
    <button class="op" onclick="append('+')">+</button>
  </div>
</div>

<script>
  let expr = "";
  let scientific = false;

  const display = document.getElementById("display");
  const toggle = document.getElementById("toggle");
  const calc = document.getElementById("calc");
  const modeText = document.getElementById("modeText");

  toggle.onclick = () => {
    scientific = !scientific;
    calc.classList.toggle("scientific", scientific);
    toggle.classList.toggle("scientific", scientific);
    modeText.textContent = scientific ? "科学" : "普通";
  };

  function append(v) {
    expr += v;
    display.textContent = expr;
  }

  function clearAll() {
    expr = "";
    display.textContent = "0";
  }

  function calculate() {
    try {
      const result = Function(`"use strict";return (${expr})`)();
      expr = String(result);
      display.textContent = expr;
    } catch {
      display.textContent = "Error";
      expr = "";
    }
  }

  function toggleSign() {
    if (!expr) return;
    expr = expr.startsWith("-") ? expr.slice(1) : "-" + expr;
    display.textContent = expr;
  }

  function percent() {
    if (!expr) return;
    expr = String(Number(expr) / 100);
    display.textContent = expr;
  }
</script>

</body>
</html>

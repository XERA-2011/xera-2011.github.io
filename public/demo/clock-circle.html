<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>极简厚度递减时钟</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #050505;
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden;
        }

        .clock-container {
            position: relative;
            width: 500px;
            height: 500px;
        }

        /* 中心信息区 */
        .center-info {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* 时间：最大、最亮 */
        .center-info .time {
            color: #ffffff;
            font-size: 2.8rem;
            font-weight: 400;
            letter-spacing: 2px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.9);
            line-height: 1;
            margin-bottom: 10px; /* 调整间距 */
        }

        /* 日期：中等大小、银白色 */
        .center-info .date {
            color: #d0d0d0;
            font-size: 1.2rem;
            font-weight: 600;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            line-height: 1;
        }

        svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        circle {
            fill: none;
            stroke-linecap: round; 
        }

        /* 轨道颜色统一 */
        .track {
            stroke: #1a1a1a;
        }

        /* Ghost 元素 */
        .ghost {
            opacity: 0; 
            pointer-events: none; 
        }

        /* 
           === 样式定义：线宽与颜色 ===
           由内到外：更宽更亮 -> 更细更暗
        */

        /* 1. 秒 (内层)：宽 10px */
        .style-sec { 
            stroke-width: 10px;
            stroke: #ffffff; 
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.9)); 
        }

        /* 2. 分 (中层)：宽 8px */
        .style-min { 
            stroke-width: 8px;
            stroke: #dcdcdc; 
            filter: drop-shadow(0 0 4px rgba(220, 220, 220, 0.6)); 
        }

        /* 3. 12H (次外)：宽 6px */
        .style-12h { 
            stroke-width: 6px;
            stroke: #a9a9a9; 
            filter: drop-shadow(0 0 3px rgba(169, 169, 169, 0.5)); 
        }

        /* 4. 24H (最外)：宽 4px */
        .style-24h { 
            stroke-width: 4px;
            stroke: #666666; 
            filter: drop-shadow(0 0 2px rgba(100, 100, 100, 0.4)); 
        }

    </style>
</head>
<body>

    <div class="clock-container">
        <div class="center-info">
            <div class="time" id="timeDisplay">00:00:00</div>
            <div class="date" id="dateDisplay">2023-01-01</div>
        </div>

        <svg viewBox="0 0 200 200">
            <!-- 
                半径配置 (基于零间距计算):
                Sec: r=60 (外边缘65)
                Min: r=69 (内边缘65, 外边缘73)
                12H: r=76 (内边缘73, 外边缘79)
                24H: r=81 (内边缘79)
            -->

            <!-- 轨道 -->
            <circle class="track style-sec" style="stroke:#1a1a1a; filter:none;" cx="100" cy="100" r="60"></circle>
            <circle class="track style-min" style="stroke:#1a1a1a; filter:none;" cx="100" cy="100" r="69"></circle>
            <circle class="track style-12h" style="stroke:#1a1a1a; filter:none;" cx="100" cy="100" r="76"></circle>
            <circle class="track style-24h" style="stroke:#1a1a1a; filter:none;" cx="100" cy="100" r="81"></circle>

            <!-- 进度条 -->
            
            <!-- Sec -->
            <circle class="style-sec ghost" id="ghostSec" cx="100" cy="100" r="60"></circle>
            <circle class="style-sec"       id="progSec"  cx="100" cy="100" r="60"></circle>

            <!-- Min -->
            <circle class="style-min ghost" id="ghostMin" cx="100" cy="100" r="69"></circle>
            <circle class="style-min"       id="progMin"  cx="100" cy="100" r="69"></circle>

            <!-- 12H -->
            <circle class="style-12h ghost" id="ghost12" cx="100" cy="100" r="76"></circle>
            <circle class="style-12h"       id="prog12"  cx="100" cy="100" r="76"></circle>

            <!-- 24H -->
            <circle class="style-24h ghost" id="ghost24" cx="100" cy="100" r="81"></circle>
            <circle class="style-24h"       id="prog24"  cx="100" cy="100" r="81"></circle>

        </svg>
    </div>

    <script>
        const RADIUS = { sec: 60, min: 69, h12: 76, h24: 81 };
        const CIRCUMFERENCE = {
            sec: 2 * Math.PI * RADIUS.sec,
            min: 2 * Math.PI * RADIUS.min,
            h12: 2 * Math.PI * RADIUS.h12,
            h24: 2 * Math.PI * RADIUS.h24
        };

        const rings = {
            sec: { prog: document.getElementById('progSec'), ghost: document.getElementById('ghostSec'), len: CIRCUMFERENCE.sec },
            min: { prog: document.getElementById('progMin'), ghost: document.getElementById('ghostMin'), len: CIRCUMFERENCE.min },
            h12: { prog: document.getElementById('prog12'), ghost: document.getElementById('ghost12'), len: CIRCUMFERENCE.h12 },
            h24: { prog: document.getElementById('prog24'), ghost: document.getElementById('ghost24'), len: CIRCUMFERENCE.h24 }
        };

        const elTime = document.getElementById('timeDisplay');
        const elDate = document.getElementById('dateDisplay');
        let lastVals = { sec: -1, min: -1, h12: -1, h24: -1 };

        function updateClock() {
            const now = new Date();
            const ms = now.getMilliseconds();
            const s = now.getSeconds();
            const m = now.getMinutes();
            const h = now.getHours();

            // 1. 文字更新
            const tH = String(h).padStart(2, '0');
            const tM = String(m).padStart(2, '0');
            const tS = String(s).padStart(2, '0');
            elTime.innerText = `${tH}:${tM}:${tS}`;

            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            elDate.innerText = `${year}-${month}-${day}`;

            // 2. 进度计算
            const valSec = s + ms / 1000;
            const valMin = m + valSec / 60;
            const val12 = (h % 12) + valMin / 60;
            const val24 = h + valMin / 60;

            const pctSec = valSec / 60;
            const pctMin = valMin / 60;
            const pct12 = val12 / 12;
            const pct24 = val24 / 24;

            // 3. 渲染
            updateRing('sec', pctSec, valSec, 60);
            updateRing('min', pctMin, valMin, 60);
            updateRing('h12', pct12, val12, 12);
            updateRing('h24', pct24, val24, 24);

            requestAnimationFrame(updateClock);
        }

        function updateRing(key, pct, currentVal, maxVal) {
            const r = rings[key];
            const lastVal = lastVals[key];
            const drawLen = r.len * pct;
            
            r.prog.style.strokeDasharray = `${drawLen} ${r.len}`;
            r.prog.style.strokeDashoffset = 0;

            // 动画触发
            if (lastVal > maxVal * 0.9 && currentVal < maxVal * 0.1 && currentVal < lastVal) {
                triggerGhostAnimation(key);
            }
            lastVals[key] = currentVal;
        }

        function triggerGhostAnimation(key) {
            const r = rings[key];
            const ghost = r.ghost;

            ghost.style.strokeDasharray = `${r.len} ${r.len}`;
            
            ghost.animate([
                { strokeDashoffset: 0, opacity: 1 },
                { strokeDashoffset: -r.len, opacity: 1 }
            ], {
                duration: 800,
                easing: 'ease-out',
                fill: 'forwards'
            });
        }

        requestAnimationFrame(updateClock);
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>极简跳动时钟 - 智能24H版 (合并分钟)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #050505;
            font-family: 'Roboto Mono', monospace;
            color: #333;
            overflow: hidden;
        }

        .clock-stage {
            position: relative;
            /* 响应式尺寸：以屏幕短边为基准 */
            width: 90vmin; 
            height: 90vmin;
            max-width: 600px;
            max-height: 600px;
            /* 基准字体大小，随容器缩放 */
            font-size: calc(90vmin / 40); 
            
            border-radius: 50%;
            background: radial-gradient(circle, #111 0%, #000 80%);
            box-shadow: inset 0 0 3em rgba(0,0,0,1);
        }
        
        @media (min-width: 666px) and (min-height: 666px) {
            .clock-stage {
                font-size: 16px; /* 大屏锁定最大字号 */
            }
        }

        .num-item {
            position: absolute;
            transform: translate(-50%, -50%);
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            transition: color 0.1s, text-shadow 0.1s, transform 0.2s; 
            cursor: default;
            user-select: none;
            /* 修改：宽度自适应，并禁止换行，防止 13:30 换行显示 */
            width: auto;
            min-width: 2em;
            height: 2em;
            white-space: nowrap; 
        }

        /* 激活态 (红) */
        .num-item.active {
            color: #ff3b30;
            font-weight: 700;
            text-shadow: 0 0 0.8em rgba(255, 59, 48, 0.8);
            z-index: 10;
        }

        /* 秒 (最外圈) */
        .sec-item { font-size: 0.6em; color: #1a1a1a; }
        .sec-item.active { font-size: 1em; transform: translate(-50%, -50%) scale(1.4); }

        /* 时 (内圈) */
        .hour-item { font-size: 1em; color: #2a2a2a; }
        .hour-item.active { font-size: 1.5em; transform: translate(-50%, -50%) scale(1.3); }

        /* 中心日期 */
        .center-display {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 0.1em;
            z-index: 20;
            width: 35%;
            height: 35%;
            background: radial-gradient(circle, rgba(255,255,255,0.03) 0%, transparent 70%);
            border-radius: 50%;
        }

        .disp-year {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9em;
            letter-spacing: 0.2em;
            margin-bottom: 0.3em;
        }

        .disp-date-row {
            display: flex;
            align-items: baseline;
            gap: 0.5em;
        }

        .disp-day {
            color: #ffffff;
            font-size: 4.5em;
            line-height: 1;
            font-weight: 700;
            text-shadow: 0 0 1em rgba(255,255,255,0.3);
        }

        .disp-month {
            color: #ffffff;
            font-size: 1.5em;
            font-weight: 300;
            text-transform: uppercase;
        }

        .disp-weekday {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.75em;
            letter-spacing: 0.2em;
            margin-top: 0.6em;
            border-top: 1px solid rgba(255,255,255,0.2);
            padding-top: 0.5em;
            width: 60%;
        }
    </style>
</head>
<body>

    <div class="clock-stage" id="stage">
        <div class="center-display">
            <div class="disp-year" id="ui-year">2023</div>
            <div class="disp-date-row">
                <div class="disp-day" id="ui-day">01</div>
                <div class="disp-month" id="ui-month">JAN</div>
            </div>
            <div class="disp-weekday" id="ui-weekday">SUNDAY</div>
        </div>
    </div>

    <script>
        const stage = document.getElementById('stage');
        
        // 半径配置 (百分比)
        const R_SEC_PCT = 45; 
        // const R_MIN_PCT = 36; // 移除分钟圈
        const R_HOUR_PCT = 32;   // 稍微调大小时圈半径，给 "13:30" 更多空间

        function createRing(type, count, radiusPct) {
            for (let i = 0; i < count; i++) {
                const el = document.createElement('div');
                el.className = `num-item ${type}-item`;
                
                // 初始文字，稍后在 update 中会被修正
                let text = i;
                if (type === 'hour') text = i === 0 ? 12 : i;
                el.innerText = text;

                const angleDeg = (i * (360 / count)) - 90;
                const angleRad = angleDeg * Math.PI / 180;
                
                const x = radiusPct * Math.cos(angleRad);
                const y = radiusPct * Math.sin(angleRad);
                
                el.style.left = `calc(50% + ${x}%)`;
                el.style.top = `calc(50% + ${y}%)`;
                
                stage.appendChild(el);
            }
        }

        createRing('sec', 60, R_SEC_PCT);
        // createRing('min', 60, R_MIN_PCT); // 不再创建分钟刻度
        createRing('hour', 12, R_HOUR_PCT);

        const secItems = document.querySelectorAll('.sec-item');
        // const minItems = document.querySelectorAll('.min-item'); // 不需要获取分钟元素了
        const hourItems = document.querySelectorAll('.hour-item');
        
        const uiYear = document.getElementById('ui-year');
        const uiDay = document.getElementById('ui-day');
        const uiMonth = document.getElementById('ui-month');
        const uiWeekday = document.getElementById('ui-weekday');

        const months = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
        const days = ["SUNDAY", "MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY", "SATURDAY"];

        function update() {
            const now = new Date();
            const s = now.getSeconds();
            const m = now.getMinutes();
            const h = now.getHours();
            
            // 核心逻辑：判断当前是否下午 (12:00 - 23:59)
            const isPm = h >= 12;
            const hIndex = h % 12; // 0-11

            // 实时更新小时圈文字（处理 12/24小时制 以及 分钟拼接）
            hourItems.forEach((el, i) => {
                // 1. 计算当前小时的基础数字
                let baseNum;
                if (isPm) {
                    // 下午: 12, 13, 14...
                    baseNum = i === 0 ? 12 : (12 + i);
                } else {
                    // 上午: 12, 1, 2...
                    baseNum = i === 0 ? 12 : i;
                }

                // 2. 构造最终显示文本
                let finalText = String(baseNum);
                
                // 如果是当前激活的小时，则追加分钟数，例如 "13:30"
                if (i === hIndex) {
                    finalText += ':' + String(m).padStart(2, '0');
                }

                // 3. 只有当文字变化时才更新 DOM（简单优化性能）
                if (el.innerText !== finalText) {
                    el.innerText = finalText;
                }
            });

            // 1. 移除旧激活态
            document.querySelector('.sec-item.active')?.classList.remove('active');
            // document.querySelector('.min-item.active')?.classList.remove('active'); // 移除分钟
            document.querySelector('.hour-item.active')?.classList.remove('active');

            // 2. 添加新激活态
            if(secItems[s]) secItems[s].classList.add('active');
            // if(minItems[m]) minItems[m].classList.add('active'); // 移除分钟
            if(hourItems[hIndex]) hourItems[hIndex].classList.add('active');

            // 3. 日期更新
            uiYear.innerText = now.getFullYear();
            uiDay.innerText = String(now.getDate()).padStart(2, '0');
            uiMonth.innerText = months[now.getMonth()];
            uiWeekday.innerText = days[now.getDay()];

            requestAnimationFrame(update);
        }

        update();
    </script>
</body>
</html>
